{"file_path": "../../raw_kb_v2\\article\\1500000316201\\index.html", "content": {"title": "\n\n\n Triggering a Campaign from a Domo DataSet Alert\n\n\n", "article_body": "\n\nIntro\n-------\n\nYou can start a Campaign from a Domo DataSet Alert.\u00a0Documentation on Domo DataSet Alerts can be found\n\nhere\n\n.\n\n\n Setting up a Domo DataSet Alert with Campaigns\n------------------------------------------------\n\n\n###\n Go to DataSet Alerts\n\nTo setup\u00a0a Domo DataSet Alert,\u00a0go to\n **Data**\n , select your DataSet, select the\n **Alerts**\n tab, and click on\n **New Alert**\n .\n\n\n###\n Configure your Alert\n\nConfigure your Alert Rule. Documentation on setting up your Alert can be found\n\nhere\n\n.\n\n\n**Note:**\n B\n\ne sure to go to the \"You'll be notified when this alert is in a triggered state\n **every time your data updates**\n :\" section and\n **Uncheck**\n the check box \"Keep sending notifications while in a triggered state\". Otherwise, your Campaign could be triggered over and over again and you could end up spamming your recipients.\n\n\n Click\n **Next**\n when finished.\n\n##\n Create a Domo Webhook\n\nThe next step is to create the Domo Webhook that will be triggering your Campaign.\u00a0In the Message screen, click\n **Attach Action**\n and select\n **Domo Webhook**\n .\n\n\n###\n Configure the\u00a0Domo Webhook\n\nNext:\n\n. In the box titled\n **URL**\n , paste the following URL:\n\n\n https://campaigns-prod.domolabs.io/api/v1/campaigns/bae/start\n2. Set\n **Method**\n to\n **POST**\n .\n3. Leave the box\n **Secret (optional)**\n blank.\n4. Click on\n **Webhook body**\n to expand that section.\n\n##\n Configure the Domo Webhook\u00a0body\n\nIn order to configure the Domo Webhook body, you need to click the pencil icon next to\n **Message**\n .\n\nIn the\n **Customize the webhook's body's message**\n section, paste the following JSON:\n\n\n```\n{\n \"campaignId\": 0,\n \"instance\": \"\",\n \"domoAccessToken\": \"\",\n \"domoAccessTokenOwnerEmailAddress\": \"\",\n \"emailAddresses\": [\"\"],\n \"isTest\":true,\n \"fields\":[{\"key\": \"\", \"value\": \"\"},\n           {\"key\": \"\", \"value\": \"\"},\n           {\"key\": \"\", \"value\": \"\"}]\n}\n\n``\n\n\n Each of the values should be defined as follows:\n\n###\n Campaign Id\n\nThe id of the Campaign you want to start.\u00a0You can get the Campaign Id by editing the Campaign and going to the\n **Settings**\n tab:\n\n\n####\n Domo Access Token\n\nA Domo access token that has been generated in Domo.\u00a0You can generate Domo Access Tokens by logging in,\u00a0going to the\n **Admin**\n settings section, go to\n **Security**\n , and selecting\n **Access tokens**\n .\u00a0There you can simply generate a new access token to use for calls to the API.\n\n\n####\n Domo Access Token Owner Email Address\n\nThe email address of the user who owns the\n **Domo Access Token**\n specified above.\n\n###\n Email Addresses (OPTIONAL)\n\nA list of email addresses the campaign should be delivered to.\u00a0If no email addresses are selected, the entire campaign will be started and delivered to all recipients in the distribution list.\n\n\n**Note:**\n T\n\nhese email addresses\n **MUST**\n exist in your distribution list.\u00a0 If you specify an email address that does not exist in your distribution list, no email will be delivered to that email address.\n\n\n**Tip:**\n You can use the\n **+ Metric**\n button to include values from the row in the DataSet that triggered this Alert. For instance, if you\u00a0want\u00a0to only deliver this Campaign to the email address in the row in the DataSet that triggered this Alert, you would click on\n **+ Metric**\n and select the field in your DataSet that contains the email address.\n\n\n This will add a tag to your webhook's body's message that will reference that field in your DataSet.\u00a0Now when this Alert is triggered, the email address from the row that triggered the Alert will be included in the message that is sent to Campaigns.\u00a0This will cause the Campaign to only be delivered to that email address.\u00a0Again, please note that the email address\n **MUST**\n exist in your distribution list or the email will not be delivered.\n\n###\n Instance\n\nYou Domo instance (e.g.\n\ndomo.domo.com\n\n).\n\n###\n Is Test (OPTIONAL)\n\nYou can use this flag to send a test Campaign. This can help you test your Campaign, connection, access token, etc. without actually sending an email to your recipients. This is the same functionality as when you click the\n **Test Email**\n button from within the\n **Distribution List**\n in the Campaigns app. When you send a test Campaign the email will be delivered to the\n **Sender Address**\n of the Campaign rather than the recipients so that the delivered content can be tested and verified.\n\n\n**Note:**\n\nIf you set this flag to\n **true**\n , you\n **MUST**\n specify at least one email address in the\n **Email Addresses**\n field.\u00a0You cannot send a Test Campaign without specifying at least one email address.\n\n###\n Fields (OPTIONAL)\n\nFields give you the ability to pass other information and values from the Alert to Campaigns so that information can be used in the Campaign messages.\n\n\n For instance, if the DataSet to which I am adding this Alert has a field for\n **first name**\n and\n **last name**\n and I want to include those fields in my Campaign, I would include those fields from my DataSet in the\n **fields**\n list.\u00a0 You can then use the\n **key**\n to insert those values into Campaigns.\n\nThen I would go to my Campaign and add the following tag into my Campaign anywhere I would want my Alert fields to be rendered.\n\n\n```\n{{domo-alert-**[field key goes here]**}}\n\n``\n\n\n So anywhere I want\n **first name**\n rendered I would add the tag\n\n\n```\n {{domo-alert-first name}}\n\n``\n\n\n and anywhere I want\n **last name**\n rendered I would add the tag\n\n\n```\n{{domo-alert-last name}}\n\n``\n\n\n In Campaigns it would look like this:\n\n\n**Note:**\n To avoid failures and issues, make sure the name of your key in your DataSet Alert exactly matches the name in your Campaigns tag\n\n.\n\n\n####\n Example of Webhook's Body's Message\n\nAn example of a completed webhook's body's message would look like this:\n\n\n###\n Testing and errors\n\n\n####\n Testing\n\nOnce you have your webhook's\u00a0body's message configured, you can test it by clicking on the\n **Send Test**\n button.\n\nThis will call the endpoint in Campaigns with your custom webhook's body's message and will notify you if the call succeeded or failed.\n\n\n**Note:**\n b\n\ne sure to have the\n **isTest**\n flag set to\n **true**\n and include at least one email address in the\n **emailAddresses**\n field so you don't accidentally deliver this Campaign to all of your recipients.\n\n\n####\n Errors\n\nIf your test does not succeed, there are a number of things to check. A few of them are:\n\n. Ensure your Campaign Id is correct.\n2. Ensure you have a valid Domo Access Token specified in the\n **domoAccessToken**\n field.\n3. Ensure the Domo user who owns the Domo Access Token has access to the Campaign and the Campaign's distribution list DataSet.\n4. Ensure the email address specified in the\n **domoAccessTokenOwnerEmailAddress**\n field matches the email address of the user in Domo who owns the Domo Access Token.\n5. If the\n **isTest**\n flag is set to\n **true**\n , ensure you have included at least one\u00a0email address in the\n **emailAddresses**\n field.\n6. Ensure your webhook's\u00a0body's message is a correctly formed JSON\u00a0object.\u00a0There are a number of JSON validators available online that you could use to check.\n\n\n", "preview_article": "\n\nClick here to preview\n\n", "url_name": "\n\n\n 1500000316201\n\n\n", "summary____________________________________________briefly_describe_the_article_the_summary_is_used_in_search_results_to_help_users_find_relevant_articles_you_can_improve_the_accuracy_of_search_results_by_including_phrases_that_your_customers_use_to_describe_this_issue_or_topic": "\n\n", "article_number": "\n\n\n 000004128\n\n\n", "archived_date": "\n\n\n", "language": "\n\n\n English\n\n\n", "primary_version": "\n\nTriggering a Campaign from a Domo DataSet Alert\n\n", "article_total_view_count": "\n\n\n 2,579\n\n\n", "": "\n\n", "article_created_date": "\n\n\n 10/24/2022, 9:24 PM\n\n\n", "first_published_date": "\n\n\n 10/24/2022, 10:41 PM\n\n\n"}, "title": "triggering_a_campaign_from_a_domo_dataset_alert", "breadcrumbs": [{"text": "domo", "url": "/s/knowledge-base/"}, {"text": "creating_custom_visualizations", "url": "/s/topic/0TO5w000000ZampGAC"}, {"text": "available_apps", "url": "/s/topic/0TO5w000000Zan9GAC"}]}