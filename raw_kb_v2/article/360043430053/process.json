{"file_path": "../../raw_kb_v2\\article\\360043430053\\index.html", "content": {"title": "\n\n\n Beast Mode FAQs\n\n\n", "article_body": "\n\nIntro\n-------\n\nGet answers to frequently asked questions about Beast Mode.\n\n####\n How do I get started with Beast Mode?\n\nFor detailed information about adding calculations using Beast Mode, see\n\nBeast Mode Functions Reference Guide\n\n.\n\n####\n Why am I getting an \"Invalid Query\" error when I try to save my Beast Mode calculation?\n\nHere are some common reasons why you might have received an Invalid Query error as a result of improper practices in setting up a Beast Mode:\n\n Column names need to be surrounded by back tics:\n\n`column`\n\n. Users commonly use single quote marks instead of the back tic, and this creates the error.\n* A string value needs to be surrounded by single quotes:\n\n\u2018text\u2019\n\n.\n* A case statement always needs to have a\n\nCASE\n\n,\n\nWHEN\n\n,\n\nTHEN\n\n, and an\n\nEND.\n\nHere is an example of a basic case statement:\n\n\n`CASE WHEN `column1` = \u2018good\u2019 THEN \u2018Yes\u2019 ELSE \u2018No\u2019`\n`END`\n\n\n The\n\nELSE\n\nportion is optional;\u00a0if there is no\n\nELSE\n\nthen the value will be\n\nNULL\n\nif it doesn\u2019t match the first portion.\n\nIf you have additional questions about how to implement functions properly in Beast Mode, review this article:\n\nBeast Mode Functions Reference Guide\n\n\n#####\n Can I use \"AND\" operators in Beast Mode?\n\nYes.\u00a0For example, you could do the following within a CASE function:\n\n\n`case when `Name` like 'Ca%' AND `id` < 10 then 0 else 1 end`\n\n####\n Can I create custom or multiple summary numbers using Beast Mode?\n\nYes. For information and examples, see\n\nSample Beast Mode Calculations -- Creating a custom summary number\n\n.\n\n####\n Can I do \"value summing\" within Beast Mode?\n\nYes, this is\u00a0possible. For example:\n\n\n`CASE WHEN `Status` in ('New Sales','Renewed') THEN SUM(`Revenue`)`\n\n\n`ELSE 0`\n\n\n`END`\n\n\n Be aware, however, that you will probably not get the summed value you want, since the SUM takes\u00a0place within\u00a0the cell instead of the column. If this doesn't work for you, consider\u00a0using a\u00a0Summary Number instead of Beast Mode.\n\n####\n Can I do numerical comparisons using Beast Mode? For example, could I create a CASE statement to tell if a string is between a range of numbers?\n\nNo. So the following Beast Mode CASE statement would fail:\n\n\n`case when`\n\n\n`postcode > 0 then 1`\n\n\n`else 0`\n\n\n`end`\n\n####\n How do I filter on multiple columns and conditions?\n\nSay you want to see how many client upsell opportunities closed (won or paused), but with the native Domo filter, you can't\u00a0apply multiple conditions to a row-level filter. To filter on multiple non-inclusive columns and conditions, you can create a logical Beast Mode calculation.\n\n\n For this situation, the Best Mode would look like this:\n\n\n`CASE`\n\n\n`WHEN `opportunity\\_type` = \u2018upsell\u2019 AND `opportunity\\_won` = \u2018true\u2019 THEN \u2018Yes\u2019`\n\n\n`WHEN `opportunity\\_type` = \u2018upsell\u2019 AND `opportunity\\_paused` = \u2018true\u2019 THEN \u2018Yes\u2019`\n\n\n`ELSE \u2018No\u2019`\n\n\n`END`\n\n####\n How do I filter out certain dates?\n\nSay you want to see how many closed opportunities were won by day in a bar chart, but you want to filter out outliers, such as opportunities that were won within 10 days. To do this, you will want to create a Beast Mode calculation to use in the\n **Filter**\n field that will calculate the time from opportunity open to closed and then categorize them as\u00a0\u201cYes\u201d or\u00a0\u201cNo\u201d based on whether or not they closed within 10 days.\n\n\n The Beast Mode you would create to this could be named \u201cOpty Closed within 10 Days?\u201d and look like this:\n\n\n`CASE`\n\n\n`WHEN DATEDIFF(`Opportunity\\_Closed\\_Date`,`Opportunity\\_Open\\_Date`) <= 10 THEN \u2018Yes\u2019`\n\n\n`WHEN DATEDIFF(`Opportunity\\_Closed\\_Date`,`Opportunity\\_Open\\_Date`) > 10 THEN \u2018No\u2019`\n\n\n`ELSE \u2018Outlier\u2019`\n\n\n`END`\n\n####\n How do I find the difference between two date columns without including weekends?\n\nUse a\n\nDATEDIFF\n\nfunction then subtract\u00a02 for every week.\n\n####\n How do I filter data so the summary number matches the value displayed in the card?\n\nSay you have a map card of the United States that calculates\u00a0the sales amount broken out by state, and the summary number shows the total sales amount. However, the total sales amount in the card legend for the United States is lower than the summary number amount. The reason the sales amount in the Summary Number is larger is because the summary number takes into account all sales amounts regardless of country, and the card legend only shows the sales amounts for the United States. For this scenario, you will need to create a Beast Mode calculation that filters out the non-United States sales amounts.\n\n\n The Beast Mode to do this would look like this:\n\n\n`CASE`\n\n\n`WHEN `Country` = \u2018United States\u2019 THEN \u2018Yes\u2019`\n\n\n`ELSE \u2018No\u2019`\n\n\n`END`\n\n\n For more information about summary numbers, see\n\nConfiguring Your Chart Summary Number\n\n.\n\n####\n Can I do \"percent of total\" functions in Beast Mode?\n\nNo, but you can insert a data label into your chart that contains the percent of total value by doing the following:\n\n. In Analyzer, open\n **Chart Properties**\n .\n2. In\n **Data Label Settings**\n , enter\n\n%\\_PERCENT\\_OF\\_TOTAL\n\nin the\n **Text**\n field.\n\n\n#####\n Why can't I put Beast Mode calculations in the Filter field?\n\n\n The filter in the Analyzer is based on row-level filtering on the DataSet level, so it doesn\u2019t filter on aggregates. To fix this, you can use the Magic ETL or SQL DataFlow tools to group and aggregate the columns for card and filtering usage. For more information about these tools, see\n\nPrepare\n\n.\n\n\n#####\n\nCan I create a rolling average calculation using Beast Mode?\n\nYou cannot create a rolling average calculation using Beast Mode, but you can create a card that displays a quarterly average. Or you can create a DataFlow that will calculate this.\n\n\n**Why Beast Mode Can\u2019t Do This:**\n\n\n A Beast Mode function is calculated on either a single record or group of records, depending on how the data on the card is being grouped. Because of that, the calculation doesn't have a way of referencing other records. For example, if you\u2019re looking for an average for April, you can't create a calculation that looks back at other records that come before April and have it sum these for you.\n\n*Alternative 1: Show a quarterly average on a card.**\n\nFollow these steps to show a quarterly average on a card.\n\n\n**To show a quarterly average on a card,**\n\n. Set your date grain to \"by Quarter\" at the top of the card.\n\n\n For more information, see\n\nAdding Filters to Your Chart\n\n.\n2. Add your date and value columns to the x- and y-axis, respectively.\n\n\n For more information, see\n\nApplying DataSet Columns to Your Chart\n\n.\n3. Set your aggregation option for your value column to\n **AVG**\n .\n\n\n**Alternative 2: Create a DataFlow calculation**\n\nYou can create this calculation in a DataFlow. The transform would look something like this:\n\n\n`SELECT`\n\n\n``DateField``\n\n\n`,`ValueField``\n\n\n`,(SELECT`\n\n\n`SUM(`ValueField`) / COUNT(*)`\n\n\n`FROM`\n\n\n`TABLE t2`\n\n\n`WHERE`\n\n\n`t2.`DateField` > LAST_DAY(DATE_SUB(t1.`DateField`, INTERVAL 3 MONTH))`\n\n\n`AND t2.`DateField` < LAST_DAY(t1.`DateField`) ) AS `Rolling_Average``\n\n\n`FROM`\n\n\n`TABLE t1`\n\n\n This transform assumes that the date field\u00a0contains a date representing the month, e.g.\u00a0\"2015-01-01\" for January.\n\n\n In the above calculation, you\u2019re doing the following:\n\n. Using a subquery to retrieve the sum of the last 3 months\u2019 worth of values,\n2. Dividing them by the number of records it found in that range, and\n3. Calling\u00a0the\u00a0field\u00a0the \"Rolling\\_Average\" field.\n\nYou would also need to rename your field names for \"DateField\"\u00a0and \"ValueField\"\u00a0(and add any others you want in the resulting DataSet) and replace \u201cTABLE\u201d with the DataSet table you're using as your input.\n\nFor more information about\n\n\n DataFlows\n\n\n , see\n\n\n Prepare\n\n\n .\n\n\n#####\n\nHow do I create Conditional Summing using Beast Mode?\n\n\n When using a\n\nCASE\n\nstatement to create\u00a0a calculation, you may want to aggregate the results of this\n\nCASE\n\nstatement. Unfortunately, many users make the mistake of using\u00a0a SUM function inside of the CASE statement:\n\nCASE`\n\n\n`WHEN `Column\\_1` = 'Value\\_1\u2019`\n\n\n`THEN SUM(`Column\\_1`)`\n\n\n`END`\n\nInstead, you need to \u201cwrap\u201d the entire statement in a SUM function for it to execute properly:\n\nSUM(CASE`\n\n\n`WHEN `Column\\_1` = 'Value\\_1\u2019`\n\n\n`THEN SUM(`Column\\_1`)`\n\n\n`END)`\n\n####\n\nHow can I aggregate a Beast Mode calculation to make it available as my Summary Number?\n\n\n Users commonly attempt to use a Beast Mode calculation containing a\n\nCASE\n\nstatement as a Summary Number.\u00a0For a value to be used as a Summary Number, that value must have a\n *numeric*\n data type. So if a calculation contains\n *only*\n a\n\nCASE\n\nstatement, it will be seen by Domo as a\n *string*\n data type rather than a numeric data type.\n\n\n The solution to adjusting a common CASE statement calculation into a field with a numeric data type is identical to our solution for conditional summing. Simply \u201cwrap\u201d the entire statement in an aggregation function, such as SUM or COUNT, like so:\n\nSUM(CASE`\n\n\n`WHEN `Column\\_1` = 'Value\\_1\u2019`\n\n\n`THEN SUM(`Column\\_1`)`\n\n\n`END)`\n\n\n For more information about summary numbers, see\n\nConfiguring Your Chart Summary Number\n\n.\n\n####\n How do I aggregate an existing column using Beast Mode?\n\nSometimes users think that the only way to aggregate a column of data is by using a Beast Mode calculation. A better way is to\u00a0use tools within Domo\u2019s Analyzer to create aggregations of a value being used on the x-axis, y-axis, or series of the card in question. For more information, see\n\nAggregating your data\n\n.\n\n####\n How do I sort month names chronologically\u00a0on the x-axis?\n\n\n Say you want to display full month names on the x-axis of a card instead of the Domo default view of \u201cYear \u2013 Abbreviated Month\u201d (for example, 2015 \u2013 Jan), but when you apply\u00a0the month name field to the card, the months are out of order and won\u2019t sort. The month names sort alphabetically instead of chronologically\u00a0because the month name column is a \"string\"\u00a0data type. You can fix this by assigning\u00a0a numeric value to each month name and then using that as the sort.\n\n\n The Beast Mode to do this would look like this:\n\nCASE`\n\n\n`WHEN `MonthName` = \u2018January\u2019 THEN 1`\n\n\n`WHEN `MonthName` = \u2018February\u2019 THEN 2`\n\n\n`WHEN `MonthName` = \u2018March\u2019 THEN 3`\n\n\n`WHEN `MonthName` = \u2018April\u2019 THEN 4`\n\n\n`WHEN `MonthName` = \u2018May\u2019 THEN 5`\n\n\n`WHEN `MonthName` = \u2018June\u2019 THEN 6`\n\n\n`WHEN `MonthName` = \u2018July\u2019 THEN 7`\n\n\n`WHEN `MonthName` = \u2018August\u2019 THEN 8`\n\n\n`WHEN `MonthName` = \u2018September\u2019 THEN 9`\n\n\n`WHEN `MonthName` = \u2018October\u2019 THEN 10`\n\n\n`WHEN `MonthName` = \u2018November\u2019 THEN 11`\n\n\n`WHEN `MonthName` = \u2018December\u2019 THEN 12`\n\n\n`END`\n\n\n For more information about sorting data in a chart, see\n\nSorting the Data in Your Chart\n\n.\n\n####\n How do I format dates on the x-axis for year-over-year comparisons?\n\n\n Say you want to do a Year-over-Year comparison in a card, but you aren\u2019t sure where to begin. Perhaps the x-axis is showing multiple years instead of one, so a comparison is not possible. Or perhaps you are getting the error \u201cNo Data Exists\u201d when applying the year-over-year comparison series.\n\n\n To do a year-over-year comparison, you\u2019ll need to create the three following Beast Mode calculations:\n\n\n1. A calculation named\u00a0\"Months\"\u00a0that\u00a0formats the dates on the x-axis so it shows just the month and not the year:\n\n\n`DATE_FORMAT(`DateColumn`,'%M')`\n2. A calculation named \"Year over Year\"\u00a0that\u00a0creates a series in which\u00a0values are broken out by year:\n\nYEAR(`DateColumn`)`\n\n\n1. A calculation\u00a0named \"Month Sort\"\u00a0that\u00a0sorts the months on the x-axis:\n\nMONTH(`DateColumn`)`\n\n\n#####\n How do I change a date column from a \"string\" data type to a \"date\" data type?\n\n\n Say you want to use dates in your card, but the date column you want to use is being read as a \u201cstring\u201d data type, which is causing the date values in the column to be non-sorted and non-sortable in the card. You can change the data type of a column containing dates from a string value to a date value using a Beast Mode calculation, as follows:\n\nSTR\\_TO\\_DATE(`DateColumn`,\u2019%d/%m/%Y\u2019)`\n\n*Note:**\n Be sure only date values, such as 1/1/2016, are used as values in the column. Otherwise, the calculation won\u2019t work.\n\nFor more information about data types, see\n\nUnderstanding Chart Data\n\n.\n\n####\n How do I format date values on the x-axis?\n\n\n Say you want to view the date values in a specific format instead of the standard card format. For example, your card is visualizing the current month by day, so the date values on the x-axis are showing the year, month, and day (for example, 2016-01-15). However, you may only want to see the day and month values (01-15).\n\n\n You can change the display of date values so you only see the day and month, using the DATE\\_FORMAT() function to reformat the date values:\n\nDATE\\_FORMAT(`DateColumn`,\u2019%d-%m\u2019)`\n\n\n You can also format dates in using\n **Chart Properties**\n . For more information, see\n\nChanging the Date Format in Your Chart\n\n.\n\n####\n\nHow do I change the date column to represent a different time zone?\n\n\n You can adjust your company time zone in the Admin Settings, as described here:\n\nSetting Your Company Time Zone\n\n.\n\n\n Sometimes, though, you\u2019ll need to use a Beast Mode when time zones don\u2019t match up between DataSets.\n\n\n Say the dates in the date column in a card are based on EST, but your company is based on PST, and you want to see the data based on PST instead of EST. You can shift the dates values to another time zone by adding or subtracting time from the date values depending on what time zone you are switching it to. The functions that add and subtract time are\n\nDATE\\_ADD()\n\nand\n\nDATE\\_SUB()\n\n. For example, switching the date values from EST to PST would require you to subtract 3 hours, and can be done with the Beast Mode calculation like the one below:\n\nDATE\\_SUB(`DateColumn`, interval 3 HOUR)`\n\n####\n How can I use Beast Mode to calculate percent (%) change from the previous year to the current year?\n\nThis topic is discussed here:\n\nSample Beast Mode Calculations - Calculating\u00a0Percent Change from the Previous Year to the Current Year\n\n\n .\n\n\n#####\n How do I create a period-over-period graph using Beast Mode?\n\nThis topic is discussed here:\n\nSample Beast Mode Calculations - Creating a Period-over-Period Graph\n\n\n .\n\n\n#####\n How do I divide by NULL or zero?\n\nYou can divide by NULL or zero by using the following case statement:\n\n\n`CASE`\n\n\n`WHEN iFNULL(`value2`,0) = 0 THEN 0`\n\n\n`ELSE `value1` / `value2``\n\n\n`END`\n\n####\n How do I create conditional summing?\n\nWhen using a CASE statement to create a calculation, you may want to aggregate the results of this CASE statement. Unfortunately, many users make the mistake of using a SUM function inside of the CASE statement, like the following:\n\n\n`CASE WHEN `Column_1` = 'Value_1\u2019 THEN SUM(`Column_1`) END`\n\n\n Instead, you need to \u201cwrap\u201d the entire statement in a SUM function for it to execute properly:\n\n\n`SUM(CASE WHEN `Column_1` = 'Value_1\u2019 THEN SUM(`Column_1`) END)`\n\n####\n I've added a shared calculation but it only seems to show up in new cards. Is there a way to use it in existing cards?\n\nWhen you share a Beast Mode calculation, it is stored\u00a0on the data source powering the card. The shared calculation is available in other cards that are powered up by that same data source.\n\n####\n\n\n What do I do if my Beast Mode \u201cdisappears\u201d after saving?\n\nThis issue is most commonly caused by multiple users editing the same card at the same time\u00a0and overwriting each others' changes. If the Beast Mode is shared on the DataSet, it can also be caused by users editing different cards on the DataSet overwriting each others' changes to the shared Beast Modes on that DataSet.\n\n\n This problem can most easily be solved by e\n\n\n ither coordinating\u00a0with other users to make sure you\u2019re not overwriting each others' changes, or by editing\u00a0at a time when others are\u00a0not as likely to also be making edits.\n\n\n This issue also occurs when you attempt to create Beast Mode calculations on a card in a drill path.\u00a0Because drill path cards are not actual cards,\u00a0Beast Mode calculations\u00a0created in a drill path will not be saved. In order to ensure the calculations\u00a0are saved, they must be created in the top layer of the card\u00a0and have the\n **Share Calculation on DataSet**\n checkbox checked. For more information about drill path, see\n\nAdding Drill Path to Your Chart\n\n.\n\n####\n How do I deal with NULL values when adding columns?\n\nIf you are trying to SUM the values in a column with NULL values, you need to convert those NULL values to zero using the IFNULL function.\n\n\n For example,\n\n\n`IFNULL(`col`,0)`\n\n\n So let's say you had a \"Category\" column with values \"A,\" \"B,\" and \"C,\" and an \"Amount\" column with values \"20,\" \"10\" and an empty cell (which is NULL). When you SUM the Amount column, the IFNULL calculation converts the NULL value to 0 and then applies the SUM as normal.\n\n####\n Can I use links to local file URLs in Beast Mode calculations?\n\nNot at this time.\n\n####\n How does the WEEKDAY function work in Beast Mode?\n\nThe WEEKDAY function is not supported in Beast Mode. If WEEKDAY is used, it is replaced with the functionality of DAYOFWEEK.\n\n####\n Why can't I delete a Beast Mode calculation from a card?\n\nWhen a Beast Mode\u00a0calculation is shared on a\u00a0DataSet, it can be used on multiple cards. If the calculation\u00a0is being used in any of those cards (filter, series, sort, date column, etc.),\u00a0it can't be deleted until the calculation is no longer being used by any cards. If you try to remove that calculation, you will get an error message listing all of the cards using the calculation. You should also\u00a0check the drill paths on each card, as they may be hiding calculations\u00a0that you aren't aware are being used.\n\n####\n Why does multiplying two large positive numbers result in a negative number?\n\nNumeric columns are either 64 bit LONG, 64 bit FIXED DECIMAL , or FLOAT (DECIMAL vs DOUBLE) datatypes. When a mathematical function results in a numerical value larger than maximum for the datatype, then it will overflow to a negative number.\n\n", "preview_article": "\n\nClick here to preview\n\n", "url_name": "\n\n\n 360043430053\n\n\n", "summary____________________________________________briefly_describe_the_article_the_summary_is_used_in_search_results_to_help_users_find_relevant_articles_you_can_improve_the_accuracy_of_search_results_by_including_phrases_that_your_customers_use_to_describe_this_issue_or_topic": "\n\n", "article_number": "\n\n\n 000004085\n\n\n", "archived_date": "\n\n\n", "language": "\n\n\n English\n\n\n", "primary_version": "\n\nBeast Mode FAQs\n\n", "article_total_view_count": "\n\n\n 15,875\n\n\n", "": "\n\n", "article_created_date": "\n\n\n 10/24/2022, 9:20 PM\n\n\n", "first_published_date": "\n\n\n 10/24/2022, 10:40 PM\n\n\n"}, "title": "beast_mode_faqs", "breadcrumbs": [{"text": "domo", "url": "/s/knowledge-base/"}, {"text": "creating_content_in_domo", "url": "/s/topic/0TO5w000000ZamoGAC"}, {"text": "beast_mode", "url": "/s/topic/0TO5w000000ZanAGAS"}]}