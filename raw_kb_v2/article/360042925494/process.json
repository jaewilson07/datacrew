{"file_path": "../../raw_kb_v2\\article\\360042925494\\index.html", "content": {"Title": "Sample Beast Mode Calculations: Date Transforms", "Article Body": "Intro\n                       \n\n                        Refer to the calculations in this article when you need to create date transforms in Beast Mode. Many sample calculations are available, including calculations for transforming time zones, converting week numbers to dates, changing date formats, enabling dynamic Daylight Savings, and more.\n                       \n\n                        GMT and Time Zone\n                       \n\n\n                         CASE WHEN HOUR(CURRENT_TIMESTAMP()) < 8 THEN ADDDATE(CURRENT_DATE(), -1) ELSE CURRENT_DATE() END\n                        \n\n\n                        Replace\n                        \n                         8\n                        \n                        with the GMT time difference value.\n                       \n\n                        Transform a Date or Unrecognized\u00a0Date\n                       \n\n                        You can use Beast Mode to transform the date format of a column into another column. In the following example, the user wants to reformat the date in the format YYYY-MM-DD:\n                       \n\n\n                         STR_TO_DATE(\n                        \n\n\n\n                         CONCAT (\n                        \n\n\n\n                         YEAR (`Date`) , \u2018 \u2013 \u2018\n                        \n\n\n\n                         , DAY (`Date`) , \u2018 \u2013 \u2018\n                        \n\n\n\n                         , MONTH (`Date`)\n                        \n\n\n\n                         )\n                        \n\n\n\n                         , \u2018 %Y-%m-%d \u2019\n                        \n\n\n\n                         )\n                        \n\n\n                        For more information, see\n                        \n                         Date Format Specifier Characters in Beast Mode.\n                        \n\n\n                        Week Numbers to Dates\n                       \n\n                        If you have an \"Admin\" default security role in Domo or a custom role with \"Manage All Company Settings\" enabled, you can convert week numbers in all cards to dates in the Admin Settings, as described in\n                        \n                         Changing the week display formatting\n                        \n\n                         . If you are not an \"Admin,\" do not have a custom role with \"Manage All Company Settings,\" or do not want to make this change universally, there are a number of ways to convert week numbers to dates on a card-by-card basis using Beast Mode.\n                        \n\n\n\n\n                          Option 1\n                         \n\n\n\n\n\n\n\n                            SUBDATE(`Date`,WEEKDAY(`Date`)-1)\n                           \n\n\n\n\n\n\n\n\n                           This is the simplest version and returns the full date of the Sunday for the given week. So if the week number was Week 1 of 2015, the calculation would return \"2015-01-04\" (as Sunday fell on the 4th of January this year). Note that even though this looks like a date, Domo will consider it a character value. You cannot use the date grain selector on this value, as all cards using this Beast Mode will always be locked to weekly.\n                          \n\n\n\n\n\n\n                          Option 2\n                         \n\n\n\n\n\n\n\n                            DATE_FORMAT(SUBDATE(`Date`,WEEKDAY(`Date`)-1),'%m/%d/%Y')\n                           \n\n\n\n\n\n\n\n\n                           This is the same as the previous option but formats the date differently (so \"01/04/2015\" is returned instead of \"2015-01-04.\"\n                          \n\n\n\n\n\n\n                          Option 3\n                         \n\n\n\n\n                         CONCAT('Week beg: ',DATE_FORMAT(SUBDATE(`Date`,WEEKDAY(`Date`)-1),'%b-%d'))\n                        \n\n\n                        This version puts the text \"Week beg:\" and then only shows the month and day of that week's\u00a0Sunday. For example: \"Week beg: Jan 04.\"\n                       \n\n\n\n                          Option 4\n                         \n\n\n\n\n                         CONCAT(DATE_FORMAT(SUBDATE(`Date`,WEEKDAY(`Date`)-1),'%b %d'),' - ',DATE_FORMAT(SUBDATE(`Date`,WEEKDAY(`Date`)-7),'%b %d %Y'))\n                        \n\n\n                        In this version, values span both months and years. This version\u00a0returns \"Jan 01 - Jan 07 2015.\"\u00a0The year is always associated with the\u00a0end of the week. For the last week of 2014, you would see \"Dec 28 - Jan 03 2015.\"\n                       \n\n                        Removing the Timestamp from Dates\n                       \n\n                        If you have a date format that includes month, day, year, hour, minute, and second (for example,\n                        \n                         21-Apr-16 1:53:46\n                        \n                        ), you can change the format using Beast Mode.\n                       \n\n                        The formula below will maintain your data type as a date if you need it. This requires that the data type in Domo be a date type.\n                       \n\n\n                         DATE (`DateField`)\n                        \n\n\n                        If the Domo data type is a string, you can convert it. The following example shows how to do this:\n                       \n\n\n                         str_to_date('21-APR-16 1:53:46','%d-%b-%y\u2019)\n                        \n\n\n                        Depending on the raw string format, this Beast Mode may need to be slightly adjusted to interpret the raw values correctly.\n                       \n\n                        Dynamic Daylight Savings\n                       \n\n                        The following dynamic Beast Mode calculations allow you to compare a date column to daylight savings dates. A \"yes\" or \"no\" is returned if the dates are in a certain range of daylight savings.\n                       \n\n\n                         Sample Beast Mode\n                        \n\n\n                        \"Date\" is the\u00a0date column.\n                       \n\n\n                         CASE\n                        \n\n\n\n                         WHEN `date`>= CASE\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-08'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-08'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-09'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-09'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-10'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-10'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-11'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-11'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-12'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-12'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-13'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-13'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-14'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-03-14'),'%Y-%m-%d')\n                        \n\n\n\n                         END\n                        \n\n\n\n\n\n                         AND\u00a0 `date`< CASE\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-01'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-01'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-02'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-02'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-03'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-03'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-04'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-14'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-05'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-05'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-06'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-06'),'%Y-%m-%d')\n                        \n\n\n\n                         WHEN DAYOFWEEK(STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-07'),'%Y-%m-%d')) = 0 THEN STR_TO_DATE(CONCAT(YEAR(curdate()), '-11-07'),'%Y-%m-%d')\n                        \n\n\n\n                         END\n                        \n\n\n\n                         THEN 'yes'\n                        \n\n\n\n                         ELSE 'no'\n                        \n\n\n\n\n\n                         END\n                        \n\n\n                        Date Difference for Business Days\n                       \n\n                        If you need to calculate the date difference between two dates for weekdays/business days, this can be done in Beast Mode or SQL DataFlow using a query. For more information, see\n                        \n                         Date Difference for Business Days\n                        \n                        .\n                       \n\n                        Calendar Month Day\n                       \n\n\n                         Date_Format(`MyDateColumn`,'%m/%d')\n                        \n\n\n                        Calendar Year\n                       \n\n\n                         Year(`MyDateColumn`)\n                        \n\n\n                        Current Year\n                       \n\n\n                         case when Year(`MyDateColumn`) = year(current_date()) then 'True' else 'False' end\n                        \n\n\n                        Last 12 Months\n                       \n\n\n                         case\n                         \n                         when\n                         \n                         year(`MyDateColumn`) = year(current_date()) - 1\n                         \n                         and month(current_date()) <= month(`MyDateColumn`)\n                         \n                         then\n                         \n                         'Yes'\n                         \n\n                         when\n                         \n                         month(`MyDateColumn`) <= month(current_date())\n                         \n                         and year(`MyDateColumn`) = year(current_date())\n                         \n                         then\n                         \n                         'Yes'\n                         \n                         else 'No'\n                         \n                         end\n                        \n\n\n                        Last 12 Months Filter\n                       \n\n                        Use the following code to create a calculation to create a column with a 'Yes' string value where the corresponding date value is greater than or equal to the first day of the month of the current calendar day from the previous year, and a 'No' where it is not.\n                       \n\n\n                         CASE WHEN `MyDateColumn` >= STR_TO_DATE(CONCAT(YEAR(CURRENT_DATE() - 1), MONTH(CURRENT_DATE()), '01'), '%Y%m%d') THEN 'Yes' ELSE 'No' END\n                        \n\n\n                        To exclude the current month, add\n                        \n                         AND `MyDateColumn` < DATE_FORMAT(CURRENT_DATE(), '%Y%m01')\n                        \n\n\n                         CASE WHEN `MyDateColumn` >= STR_TO_DATE(CONCAT(YEAR(CURRENT_DATE() - 1), MONTH(CURRENT_DATE()), '01'), '%Y%m%d')\n                         \n                         AND `MyDateColumn` < DATE_FORMAT(CURRENT_DATE(), '%Y%m01')\n                         \n                         THEN 'Yes' ELSE 'No' END\n                        \n\n\n                        Last Year Filter\n                       \n\n                        Use the following code to create a calculation to create a column with a 'Yes' string value where the corresponding date value is greater than or equal to the current calendar day from the previous year, and a 'No' where it is not.\n                       \n\n\n                         CASE WHEN `MyDateColumn` >= STR_TO_DATE(CONCAT(YEAR(CURRENT_DATE() - 1),\u00a0MONTH(CURRENT_DATE()), DAY(CURRENT_DATE())), '%Y%m%d') THEN 'Yes' ELSE 'No' END\n                        \n\n\n                        To exclude the current date, add\n                        \n                         AND `MyDateColumn` < CURRENT_DATE()\n                        \n\n\n\n                         CASE WHEN `MyDateColumn` >= STR_TO_DATE(CONCAT(YEAR(CURRENT_DATE() - 1), MONTH(CURRENT_DATE()), DAY(CURRENT_DATE())), '%Y%m%d')\n                         \n                         AND `MyDateColumn` < CURRENT_DATE()\n                         \n                         THEN 'Yes' ELSE 'No' END\n                        \n\n\n                        Another Last Year Filter\n                       \n\n                        Use the following code to create a calculation to determine whether to add a zero '0' before the month so that it's a 2-digit month, which helps in setting the date.\n                       \n\n\n                         CASE WHEN MONTH(CURRENT_DATE()) < 10 THEN CASE WHEN `MyDateColumn` >= STR_TO_DATE(CONCAT(YEAR(CURRENT_DATE())-1, '0', MONTH(CURRENT_DATE()), '01'), '%Y%m%d') THEN\u00a0'Yes' ELSE\u00a0'No' END\n                        \n\n\n                        Rolling 13 Months\n                       \n\n\n                         CASE WHEN PERIOD_DIFF(DATE_FORMAT(STR_TO_DATE(CONCAT(YEAR(CURRENT_DATE()), MONTH(CURRENT_DATE())), '%Y%m%d'), '%Y%m'), DATE_FORMAT (`Month`, '%Y%m')) > 14\n                         \n                         THEN 'No'\n                         \n                         ELSE 'Yes'\n                         \n                         END\n                        \n\n\n                        This Fiscal Quarter\n                       \n\n                        Use the following code to create a calculation that returns \"Yes\" or \"No\" depending on whether the value falls in the current fiscal quarter:\n                       \n\n\n                         CASE WHEN `FiscalQuarter` = (CASE WHEN MONTH(CURRENT_DATE()) >= 2 AND MONTH(CURRENT_DATE()) <=4 then 1\n                         \n                         ELSE CASE WHEN MONTH(CURRENT_DATE()) >= 5 AND MONTH(CURRENT_DATE()) <=7 then 2\n                         \n                         ELSE CASE WHEN MONTH(CURRENT_DATE()) >= 8 AND MONTH(CURRENT_DATE()) <=10 then 3\n                         \n                         ELSE 4 END\n                         \n                         END\n                         \n                         END)\n                         \n                         THEN 'Yes' ELSE 'No'\n                         \n                         END\n                        \n\n\n                        This Fiscal Year\n                       \n\n                        Use the following code to create a calculation that returns \"Yes\" or \"No\" depending on whether the value falls in the current fiscal year:\n                       \n\n\n                         CASE WHEN `FiscalYear` = (CASE WHEN MONTH(CURRENT_DATE())<2 THEN YEAR(CURRENT_DATE())-1 ELSE YEAR(CURRENT_DATE()) END) THEN 'Yes' ELSE 'No' END\n                        \n\n\n                        Fiscal Calendar\n                       \n\n                        Use the following code to create a calculation to create an \"Adjusted Date\" column that maps current year date and previous year date to the same value:\n                       \n\n\n                         Date_Format(`Adjusted Date`, '%b %d')\n                        \n\n\n                        Then create a calculation to filter dates:\n                       \n\n\n                         CASE WHEN\u00a0DateDiff(AddDate(Current_Date(), -1), `Adjusted Date`) < 30\u00a0AND\u00a0DateDiff(Current_Date(), `Adjusted Date`) > 0 THEN 'Y' ELSE 'N' END\n                        \n\n\n                        Week Starting on Day X\n                       \n\n                        Use the following code to create a calculation that aggregates your data weekly. To change the week start day, add a value between 1 and 6 in place of x. Note that\n                        \n                         WEEKDAY()\n                        \n                        function is not supported in Beast Mode. If it is used, it is replaced with the functionality of\n                        \n                         DAYOFWEEK()\n                        \n                        . You can specify additional formatting using\n                        \n                         DATE_FORMAT()\n                        \n                        .\n                       \n\n\n                         SUBDATE(`Date`, DAYOFWEEK(`Date`)+X)\n                        \n\n\n                        Graphing by Day of Week\n                       \n\n                        Watch the following video to learn how to show data for different days of the week:\n                       \n\n\n\n\n\n                        Accounts Payable/Receivable Aging Buckets\n                       \n\n                        Use the following code to create a calculation for accounts receivable:\n                       \n\n\n                         CASE\n                         \n                         when DATEDIFF(CURRENT_DATE(),`TxnDate`) < 31 then ' 30 Days'\n                         \n                         when DATEDIFF(CURRENT_DATE(),`TxnDate`) < 61 then ' 60 Days'\n                         \n                         when DATEDIFF(CURRENT_DATE(),`TxnDate`) < 91 then ' 90 Days'\n                         \n                         when DATEDIFF(CURRENT_DATE(),`TxnDate`) < 121 then '120 Days'\n                         \n                         when DATEDIFF(CURRENT_DATE(),`TxnDate`) > 120 then 'Over 120'\n                         \n                         end\n                        \n\n\n                        Changing the Language for Months\n                       \n\n                        You can use a\n                        \n                         CONCAT\n                        \n                        Beast Mode function to change the language of month names. For example, if your dates were in the format\n                        \n                         %Y-%M\n                        \n                        (e.g.\n                        \n                         2019-January\n                        \n                        ), you would open with\n                        \n                         CONCAT(year(`Date`),'-',\n                        \n                        followed by a nested\n                        \n                         CASE\n                        \n                        statement in which you specify the translated term for each month.\n                       \n\n                        So, for example, if you wanted to change the language of your months to Spanish, your Beast Mode calculation would look as follows:\n                        \n\n\n                         CONCAT(year(`Date`),'-',\n                         \n                         (CASE when month(`Date`) = 1 then 'Enero'\n                         \n                         when month (`Date`) = 2 then 'Febrero'\n                         \n                         when month (`Date`) = 3 then 'Marzo'\n                         \n                         when month (`Date`) = 4 then 'Abril'\n                         \n                         when month (`Date`) = 5 then 'Mayo'\n                         \n                         when month (`Date`) = 6 then 'Junio'\n                         \n                         when month (`Date`) = 7 then 'Julio'\n                         \n                         when month (`Date`) = 8 then 'Agosto'\n                         \n                         when month (`Date`) = 9 then 'Septiembre'\n                         \n                         when month (`Date`) = 10 then 'Octubre'\n                         \n                         when month (`Date`) = 11 then 'Noviembre'\n                         \n                         when month (`Date`) = 12 then 'Diciembre'\n                         \n                         end)", "Preview Article": "Click here to preview", "URL Name": "360042925494", "Summary\n                     \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                       Briefly describe the article. The summary is used in search results to help users find relevant articles. You can improve the accuracy of search results by including phrases that your customers use to describe this issue or topic.": "", "Article Number": "000004073", "Archived Date": "", "Language": "English", "Primary Version": "Sample Beast Mode Calculations: Date Transforms", "Article Total View Count": "14,585", "": "", "Article Created Date": "10/24/2022, 9:20 PM", "First Published Date": "10/24/2022, 10:40 PM"}, "title": "\n              Sample Beast Mode Calculations: Date Transforms\n             ", "breadcrumbs": [{"text": "\n\n               Domo\n              \n", "url": "/s/knowledge-base/"}, {"text": "\n\n               Creating Content In Domo\n              \n", "url": "/s/topic/0TO5w000000ZamoGAC"}, {"text": "\n\n               Beast Mode\n              \n", "url": "/s/topic/0TO5w000000ZanAGAS"}]}