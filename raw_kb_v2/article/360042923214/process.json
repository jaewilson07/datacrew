{"file_path": "../../raw_kb_v2\\article\\360042923214\\index.html", "content": {"Title": "Adding and Subtracting Hours in the Old Magic ETL", "Article Body": "This topic shows you how to add and subtract hours using Magic ETL. Note that this is a very long and complicated process; Domo recommends using a Beast Mode calculation with\n                        \n                         ADDDATE()\n                        \n                        or\n                        \n                         SUBDATE()\n                        \n                        if possible.\n                       \n\n\n                         To add or subtract hours in Magic ETL,\n                        \n\n\n\n\n                          Open the Magic ETL editor.\n                         \n\n\n\n                          Use the\n                          \n                           Select Columns\n                          \n                          action to select the date-time column you want to add/subtract hours to/from.\n                          \n\n\n\n\n\n\n                          Use the\n                          \n                           Combine Columns\n                          \n                          action to create a new column to replicate the date-time column; call this column \"Date.\"\n                          \n\n\n\n\n\n\n\n\n\n\n                          Repeat step 3 to create an additional date-time column; call this column \"Time.\"\n                          \n\n\n\n\n\n\n                          Use the\n                          \n                           Set Column Type\n                          \n                          action to set the column type of the \"Date\" column to\n                          \n                           Date\n                          \n                          and the column type of the \"Time\" column to\n                          \n                           Date and Time\n                          \n                          .\n                          \n\n\n\n\n\n\n                          Use the\n                          \n                           Set Column Type\n                          \n                          action to convert the \"Time\" column to text.\n                          \n\n\n\n\n\n\n                          Use the\n                          \n                           Replace Text\n                          \n                          action to remove the date and\n                          \n                           'T'\n                          \n                          from the \"Time\" column.\n                          \n                          You can do this using the following regular expression:\n                          \n                           .*T\n                           \n\n\n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Combine Columns\n                          \n                          action to create a new column to replicate the \"Time\" column; call this column \"Hour.\"\n                          \n\n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Replace Text\n                          \n                          action to remove the minutes and seconds from the \"Hour\" column.\n                          \n                          You can do this using the following regular expression\n                          \n                           :.*\n                           \n\n\n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Set Column Type\n                          \n                          action to change the column type of the \"Hour\" column to\n                          \n                           Whole Number\n                          \n                          .\n                         \n\n\n\n                          Use the\n                          \n                           Calculator\n                          \n                          action to add or subtract hours. Call the new column \"New Hour.\"\n                          \n                          In the example, we add four hours.\n                          \n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Filter Rows\n                          \n                          action to filter the rows that should appear in the \"New Hour\" column. If you are ADDING hours, filter for any number greater than or equal to 24 (\n                          \n                           New Hour >= 24\n                          \n                          ); if you are SUBTRACTING hours, filter for anything below 0 (\n                          \n                           New Hour < 0\n                          \n                          ).\n                          \n\n\n\n\n\n\n                          Use the\n                          \n                           Date Operations\n                          \n                          action. If you are ADDING hours, add 1 day to the \"Date\" column; if you are SUBTRACTING hours, subtract 1 day from the \"Date\" column. Call the new column \"New Date.\"\n                          \n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Calculator\n                          \n                          action to calculate the correct number of hours. If you are ADDING hours, add 24 to the \"New Hour\" column; if you are SUBTRACTING hours, subtract 24 from the \"New Hour\" column. Call the new column \"New Hour 2.\"\n                         \n\n\n\n                          Use the\n                          \n                           Select Columns\n                          \n                          action to rename \"New Date\" and \"New Hour 2\" to \"Date\" and \"Hour.\"\n                          \n\n\n\n\n\n\n                          Insert a new\n                          \n                           Filter Rows\n                          \n                          action after the\n                          \n                           Calculator\n                          \n                          action described in step 11. In this new\n                          \n                           Filter Rows\n                          \n                          action, you are filtering for the \"New Hour\" column. If you are ADDING hours, filter for any number under 24 (\n                          \n                           New Hour < 24\n                          \n                          ); if you are SUBTRACTING hours, filter for any number greater than or equal to 0 (\n                          \n                           New Hour >= 0\n                          \n                          ).\n                          \n\n\n\n\n\n\n                          Use the\n                          \n                           Select Columns\n                          \n                          action to rename the \"New Hour\" column to \"Hour.\"\n                          \n\n\n\n\n\n\n                          Use the\n                          \n                           Append Rows\n                          \n                          action to combine the two DataSets.\n                          \n                          If all previous steps were performed correctly, both DataSets will show with no changes.\n                         \n\n\n\n                          Use a\n                          \n                           Filter Rows\n                          \n                          action to filter rows in the \"Hours\" column greater than or equal to 10 (\n                          \n                           >=10\n                          \n                          ).\n                         \n\n\n\n                          Use a\n                          \n                           Set Column Type\n                          \n                          action to set the data type for \"Hour\" to\n                          \n                           Text\n                          \n                          .\n                         \n\n\n\n                          Insert a new\n                          \n                           Filter Rows\n                          \n                          action after the\n                          \n                           Append Rows\n                          \n                          action in step 18. In this new\n                          \n                           Filter Rows\n                          \n                          action, you are filtering for rows in the \"Hours\" column less than 10 (\n                          \n                           <10\n                          \n                          ).\n                         \n\n\n\n                          Use a\n                          \n                           Set Column Type\n                          \n                          action to set the data type for \"Hour\" to\n                          \n                           Text\n                          \n                          .\n                         \n\n\n\n                          Use an\n                          \n                           Add Constants\n                          \n                          action to create a column with a value of\n                          \n                           0\n                          \n                          .\n                          \n\n\n\n\n\n\n                          Use a\n                          \n                           Combine Columns\n                          \n                          action to combine the \"0\" and \"Hour\" columns. Name the new combined column \"Hour\" and check the box to remove the columns being combined.\n                          \n\n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Append Rows\n                          \n                          action to combine the two DataSets.\n                          \n                          If all previous steps were performed correctly, both DataSets will show with no changes.\n                         \n\n\n\n                          Use the\n                          \n                           Combine Column\n                          \n                          action to combine the \"Time\" column with any other column. Call this new column \"Time Without Hour.\"\n                          \n\n\n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Replace Text\n                          \n                          action to remove the random values and hours from the \"Time Without Hour\" column.\n                          \n                          You can do this using the following regular expression:\n                          \n                           .*a\\d\\d\n                           \n\n\n\n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Combine Columns\n                          \n                          action to combine the \"Hour\" and \"Time Without Hour\" columns. Call the new column \"New Time.\"\n                          \n\n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Set Column Type\n                          \n                          action to set the data type for \"Date\" to\n                          \n                           Text\n                          \n                          .\n                         \n\n\n\n                          Use the\n                          \n                           Combine Columns\n                          \n                          action to combine the \"Date\" and \"New Time\" columns. Call the new column \"New Date/Time.\"\n                          \n\n\n\n\n\n\n\n\n\n                          Use the\n                          \n                           Set Column Type\n                          \n                          action to set the data type for \"New Date/Time\" to\n                          \n                           Date and Time\n                          \n                          .\n                         \n\n\n\n                          Use the\n                          \n                           Select Columns\n                          \n                          action to remove unwanted columns.", "Preview Article": "Click here to preview", "URL Name": "360042923214", "Summary\n                     \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                       Briefly describe the article. The summary is used in search results to help users find relevant articles. You can improve the accuracy of search results by including phrases that your customers use to describe this issue or topic.": "", "Article Number": "000004615", "Archived Date": "", "Language": "English", "Primary Version": "Adding and Subtracting Hours in the Old Magic ETL", "Article Total View Count": "5,025", "": "", "Article Created Date": "10/24/2022, 10:17 PM", "First Published Date": "10/24/2022, 10:42 PM"}, "title": "\n              Adding and Subtracting Hours in the Old Magic ETL\n             ", "breadcrumbs": [{"text": "\n\n               Domo\n              \n", "url": "/s/knowledge-base/"}, {"text": "\n\n               Transforming Data In Domo\n              \n", "url": "/s/topic/0TO5w000000ZamzGAC"}, {"text": "\n\n               Transformation Tips And Tricks\n              \n", "url": "/s/topic/0TO5w000000ZaoJGAS"}]}