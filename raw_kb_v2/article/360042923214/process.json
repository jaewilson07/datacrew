{"file_path": "../../raw_kb_v2\\article\\360042923214\\index.html", "content": {"title": "\n\n\n Adding and Subtracting Hours in the Old Magic ETL\n\n\n", "article_body": "\n\nThis topic shows you how to add and subtract hours using Magic ETL. Note that this is a very long and complicated process; Domo recommends using a Beast Mode calculation with\n\nADDDATE()\n\nor\n\nSUBDATE()\n\nif possible.\n\n\n**To add or subtract hours in Magic ETL,**\n\n. Open the Magic ETL editor.\n2. Use the\n **Select Columns**\n action to select the date-time column you want to add/subtract hours to/from.\n3. Use the\n **Combine Columns**\n action to create a new column to replicate the date-time column; call this column \"Date.\"\n4. Repeat step 3 to create an additional date-time column; call this column \"Time.\"\n5. Use the\n **Set Column Type**\n action to set the column type of the \"Date\" column to\n **Date**\n and the column type of the \"Time\" column to\n **Date and Time**\n .\n6. Use the\n **Set Column Type**\n action to convert the \"Time\" column to text.\n7. Use the\n **Replace Text**\n action to remove the date and\n\n'T'\n\nfrom the \"Time\" column.\n\n\n You can do this using the following regular expression:\n\n.\\*T\n8. Use the\n **Combine Columns**\n action to create a new column to replicate the \"Time\" column; call this column \"Hour.\"\n9. Use the\n **Replace Text**\n action to remove the minutes and seconds from the \"Hour\" column.\n\n\n You can do this using the following regular expression\n\n:.\\*\n10. Use the\n **Set Column Type**\n action to change the column type of the \"Hour\" column to\n **Whole Number**\n .\n11. Use the\n **Calculator**\n action to add or subtract hours. Call the new column \"New Hour.\"\n\n\n In the example, we add four hours.\n12. Use the\n **Filter Rows**\n action to filter the rows that should appear in the \"New Hour\" column. If you are ADDING hours, filter for any number greater than or equal to 24 (\n\nNew Hour >= 24\n\n); if you are SUBTRACTING hours, filter for anything below 0 (\n\nNew Hour < 0\n\n).\n13. Use the\n **Date Operations**\n action. If you are ADDING hours, add 1 day to the \"Date\" column; if you are SUBTRACTING hours, subtract 1 day from the \"Date\" column. Call the new column \"New Date.\"\n14. Use the\n **Calculator**\n action to calculate the correct number of hours. If you are ADDING hours, add 24 to the \"New Hour\" column; if you are SUBTRACTING hours, subtract 24 from the \"New Hour\" column. Call the new column \"New Hour 2.\"\n15. Use the\n **Select Columns**\n action to rename \"New Date\" and \"New Hour 2\" to \"Date\" and \"Hour.\"\n16. Insert a new\n **Filter Rows**\n action after the\n **Calculator**\n action described in step 11. In this new\n **Filter Rows**\n action, you are filtering for the \"New Hour\" column. If you are ADDING hours, filter for any number under 24 (\n\nNew Hour < 24\n\n); if you are SUBTRACTING hours, filter for any number greater than or equal to 0 (\n\nNew Hour >= 0\n\n).\n17. Use the\n **Select Columns**\n action to rename the \"New Hour\" column to \"Hour.\"\n18. Use the\n **Append Rows**\n action to combine the two DataSets.\n\n\n If all previous steps were performed correctly, both DataSets will show with no changes.\n19. Use a\n **Filter Rows**\n action to filter rows in the \"Hours\" column greater than or equal to 10 (\n\n>=10\n\n).\n20. Use a\n **Set Column Type**\n action to set the data type for \"Hour\" to\n **Text**\n .\n21. Insert a new\n **Filter Rows**\n action after the\n **Append Rows**\n action in step 18. In this new\n **Filter Rows**\n action, you are filtering for rows in the \"Hours\" column less than 10 (\n\n<10\n\n).\n22. Use a\n **Set Column Type**\n action to set the data type for \"Hour\" to\n **Text**\n .\n23. Use an\n **Add Constants**\n action to create a column with a value of\n\n0\n\n.\n24. Use a\n **Combine Columns**\n action to combine the \"0\" and \"Hour\" columns. Name the new combined column \"Hour\" and check the box to remove the columns being combined.\n25. Use the\n **Append Rows**\n action to combine the two DataSets.\n\n\n If all previous steps were performed correctly, both DataSets will show with no changes.\n26. Use the\n **Combine Column**\n action to combine the \"Time\" column with any other column. Call this new column \"Time Without Hour.\"\n27. Use the\n **Replace Text**\n action to remove the random values and hours from the \"Time Without Hour\" column.\n\n\n You can do this using the following regular expression:\n\n.\\*a\\d\\d\n28. Use the\n **Combine Columns**\n action to combine the \"Hour\" and \"Time Without Hour\" columns. Call the new column \"New Time.\"\n29. Use the\n **Set Column Type**\n action to set the data type for \"Date\" to\n **Text**\n .\n30. Use the\n **Combine Columns**\n action to combine the \"Date\" and \"New Time\" columns. Call the new column \"New Date/Time.\"\n31. Use the\n **Set Column Type**\n action to set the data type for \"New Date/Time\" to\n **Date and Time**\n .\n32. Use the\n **Select Columns**\n action to remove unwanted columns.\n\n\n", "preview_article": "\n\nClick here to preview\n\n", "url_name": "\n\n\n 360042923214\n\n\n", "summary____________________________________________briefly_describe_the_article_the_summary_is_used_in_search_results_to_help_users_find_relevant_articles_you_can_improve_the_accuracy_of_search_results_by_including_phrases_that_your_customers_use_to_describe_this_issue_or_topic": "\n\n", "article_number": "\n\n\n 000004615\n\n\n", "archived_date": "\n\n\n", "language": "\n\n\n English\n\n\n", "primary_version": "\n\nAdding and Subtracting Hours in the Old Magic ETL\n\n", "article_total_view_count": "\n\n\n 5,025\n\n\n", "": "\n\n", "article_created_date": "\n\n\n 10/24/2022, 10:17 PM\n\n\n", "first_published_date": "\n\n\n 10/24/2022, 10:42 PM\n\n\n"}, "title": "adding_and_subtracting_hours_in_the_old_magic_etl", "breadcrumbs": [{"text": "domo", "url": "/s/knowledge-base/"}, {"text": "transforming_data_in_domo", "url": "/s/topic/0TO5w000000ZamzGAC"}, {"text": "transformation_tips_and_tricks", "url": "/s/topic/0TO5w000000ZaoJGAS"}]}