{"file_path": "../../raw_kb_v2\\article\\360043430113\\index.html", "content": {"title": "\n\n\n Sample Beast Mode Calculations: Miscellaneous Transforms\n\n\n", "article_body": "\n\nIntro\n-------\n\nCalculating Average Time in Seconds\n-------------------------------------\n\nUse the following code to determine the average time it takes for something. This will return the average time in seconds, but you can divide the output to get days, hours or minutes.\n\n\n`-- Days --`\n\n\n`AVG(DATE(`end_date`)-DATE(`start_date`)) * 86400`\n\n\n`+`\n\n\n`-- Hours --`\n\n\n`AVG(HOUR(`end_date`)-HOUR(`start_date`)) * 3600`\n\n\n`+`\n\n\n`-- Minutes --`\n\n\n`AVG(MINUTE(`end_date`)-MINUTE(`start_date`)) * 60`\n\n\n`+`\n\n\n`-- Seconds --`\n\n\n`AVG(SECOND(`end_date`)-SECOND(`start_date`))`\n\n\n Removing NULL for Line Graphs\n-------------------------------\n\nUse the following code to create a calculation to filter NULL Values in Line graphs\u00a0(so the\u00a0line doesn't go to zero).\n\n\n`SUM(CASE WHEN `Number of SQLs` != 0 THEN`Number of SQLs` END)`\n\nSUM()\n\nis on the outside of the CASE statement as a best practice. If\n\n`Number of SQLs` = 0\n\nit will return a NULL value.\n\n\n Filtering Null Values\n-----------------------\n\nIf you are trying to SUM the values in a column with NULL values, you need to convert those NULL values to zero using the IFNULL function.\n\n\n For example,\n\n\n`IFNULL(`col`,0)`\n\n\n So let's say you had a \"Category\" column with values \"A,\" \"B,\" and \"C,\" and an \"Amount\" column with values \"20,\" \"10\" and an empty cell (which is NULL). When you SUM the Amount column, the IFNULL calculation converts the NULL value to 0 and then applies the SUM as normal.\n\nCreating Page Analyzer Links (or Deep Linking with Filters)\n-------------------------------------------------------------\n\nUsing a Beast Mode calculation, you can create links to other pages in Table cards and apply Analyzer filters according to what you have set in the Beast Mode. This is a powerful feature when you want to guide a user through a data story that involves cards that aren\u2019t in the direct drill path of the current card, or if you want users to be able to apply Analyzer filters quickly to any page from a central or parent Table card.\n\n\n To create one of these links, copy the following code into a Beast Mode calculation:\n\n\n`CONCAT(\n\n\n '<a HREF=\"\n **https://customer.domo.com/page/##########**\n '`\n\n\n`,'?\n\n\n pfilters=%5B%7B%22column%22:%22\n **ColumnName**\n %22,%22dataSourceID%22:%22\n **DataSetID**\n %22,%22dataType%22:%22\n **string**\n %22,%22operand%22:%22\n **OperandType**\n %22,%22values%22:%5B%22'`\n\n\n`,\n **`\n\nOwner.Name\n\n`**`\n\n\n`,'%22%5D%7D%5D\"\n **\\_target=BLANK**\n >'`\n\n\n`,\u2019\n **Link Display Name**\n \u2019`\n\n\n`,'</a>'`\n\n\n`)`\n\n\n**Note:**\n When using pfilters in an iFrame, you cannot use single quote marks. Instead, use the ASCII code\n\n%22\n\nto replace the quote marks.\n\n\n To create a custom Deep Link, replace the\n **bold**\n portions above with the following:\n\n  |  |\n| --- | --- |\n|\n\nhttps://customer.domo.com/page/##########\n\n|\n Replace with the entire URL for the Domo page you want to navigate to when a user clicks on the link.\n  |\n|\n ColumnName\n  |\n Replace with the column name you want to filter on.\n  |\n|\n\n\n DataSet ID\n  |\n Replace with the DatasetID of the DataSet you want to filter on. To locate this, in your Data Center, navigate to the DataSet. You'll find the ID in the URL.\n\n\n**Tip:**\n To filter all cards on a page regardless of which DataSet powers it, remove the DataSet ID parameter from your Beast Mode altogether.\n\n\n |\n|\n String\n  |\n Replace with the data type of the column you're filtering on. This can be string, value, or date.\n  |\n|\n OperandType\n  |\n Replace with the type of operand you're filtering with. Options include IN or NOT\\_IN.\n\n*Tip:**\n When using NOT\\_IN, the underscore must be included. Due to the operand being included in the URL, there cannot be a space.\n\n\n |\n|\n\nOwner.Name\n\n|\n Replace with the column that contains the values you want to filter on. For example, using\n\n\n Owner.Name\n\n\n values, when I click on the deep link in row one, data for Bob Smith will be returned. Choosing the link in row 3 will return data for Jeff Clark.\n\n|\n|\n \\_target=BLANK\n  |\n (Optional) Opens the link in a new tab in your browser. You can remove this portion from the Beast Mode if you prefer the link opened in the same browser tab.\n  |\n|\n Link Display Name\n  |\n The link display text. Instead of presenting an entire URL, you can specify how the link will be displayed.\n  |\n\n\n###\n Adding Multiple Filters\n\nTo add more than one filter, copy the entire filter portion below:\n\n\n`,'?\n\n\n ,'%22%5D%7D,%7B%22column%22:%22ColumnName%22,%22dataSourceID%22:%22DataSetID%22,%22dataType%22:%22string%22,%22operand%22:%22OperandType%22,%22values%22:%5B%22', `Owner.Name2``\n\n\n Insert the filter as many times as needed.\n\n\n`CONCAT(\n\n\n '<a HREF=\"hQps://\n\ncustomer.com/page/#########'\n\n;`\n\n\n`,'?\n\n\n pfilters=%5B%7B%22column%22:%22ColumnName%22,%22dataSourceID%22:%22DataSetID%22,%22dataType%22:%22string%22,%22operand%22:%22OperandType%22,%22values%22:%5B%22'`\n\n\n`,`\n\nOwner.Name\n\n``\n\n\n /\\* Addi&onal Column Filters - Copy and paste the below code for each additional column to filter on. \\*/\n\n\n`,'%22%5D%7D,%7B%22column%22:%22ColumnName%22,%22dataSourceID%22:%22DataSetID%22,%22dataType%22:%22string%22,%22operand%22:%22OperandType%22,%22values%22:%5B%22', `Owner.Name2``\n\n\n`,'%22%5D%7D%5D\" \\_target=BLANK>'`\n\n\n /\\* Tip: Concat column names to display what will be filtered. \\*/\n\n\n`,CONCAT(`Name`, ' | ', `Ac&on`)`\n\n\n`,'</a>'`\n\n\n`)`\n\n\n**Note:**\n When using pfilters in an iFrame, you cannot use single quote marks. Instead, use the ASCII code\n\n%22\n\nto replace the quote marks.\n\n\n For more information on HTML in Domo, see\n\nAdding Graphics, Links, and Images to Table Cards Using Beast Mode\n\n.\n\n\n Taking Advantage of Webform Fields\n------------------------------------\n\nLet's say that each month you need to update many cards to reflect the most recent closed month or current month in the filter. You want to streamline the filter as a reference point that can be updated once and trigger all the cards to use that same new month or year so each card does not have to be individually updated. For example: Closed Month = Sept or 9, Current Month = Oct or 10, Closed Year = 2016. You can do this by doing the following:\n\n. Create\u00a0a webform with the date references, which you plan to manually update to specify the current month number and year as necessary.\n2. Join the webform to your data using a DataFlow.\n3. Create a Beast Mode calculation to take advantage of the webform fields.\n\n\n For example, if you have a column called \"Closed Month\" that has a value of 9, this Beast Mode would work:\n\n\n`CASE`\n\n\n`WHEN MONTH(`Date`) = `Closed Month` THEN \"Closed Month\"`\n\n\n`ELSE \"Other\"`\n\n\n`END`\n4. Use this Beast Mode in the filters. Set the filter to \"Closed Month.\" Then, whenever you update the webform value, you will get new data displaying in all cards that use that filter.\n\nAnother option that won't require any manual intervention each month would be to\u00a0use a DataFlow to calculate the\n\nMAX(`Date`)\n\nand add a column that identifies all data that is in the same month as the\n\nMAX(`Date`)\n\n. Then filter on that field in the cards when you only want the card to use the most recent month.\n\n\n", "preview_article": "\n\nClick here to preview\n\n", "url_name": "\n\n\n 360043430113\n\n\n", "summary____________________________________________briefly_describe_the_article_the_summary_is_used_in_search_results_to_help_users_find_relevant_articles_you_can_improve_the_accuracy_of_search_results_by_including_phrases_that_your_customers_use_to_describe_this_issue_or_topic": "\n\n", "article_number": "\n\n\n 000004080\n\n\n", "archived_date": "\n\n\n", "language": "\n\n\n English\n\n\n", "primary_version": "\n\nSample Beast Mode Calculations: Miscellaneous Transforms\n\n", "article_total_view_count": "\n\n\n 6,376\n\n\n", "": "\n\n", "article_created_date": "\n\n\n 10/24/2022, 9:20 PM\n\n\n", "first_published_date": "\n\n\n 10/24/2022, 10:40 PM\n\n\n"}, "title": "sample_beast_mode_calculations_miscellaneous_transforms", "breadcrumbs": [{"text": "domo", "url": "/s/knowledge-base/"}, {"text": "creating_content_in_domo", "url": "/s/topic/0TO5w000000ZamoGAC"}, {"text": "beast_mode", "url": "/s/topic/0TO5w000000ZanAGAS"}]}