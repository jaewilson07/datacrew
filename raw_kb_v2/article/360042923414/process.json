{"file_path": "../../raw_kb_v2\\article\\360042923414\\index.html", "content": {"title": "\n\n\n Creating a Rank or Row Count\n\n\n", "article_body": "\n\nTo\n\n\n create a rank or row count for a DataSet, you can\n\n\n use a MySQL or RedShift DataFlow.\n\n\n In MySQL\n------------\n\nType the following code in your DataFlow:\n\n\n`Select`\n\n\n`a.\\*`\n\n\n`,@rank:= @rank + 1 AS `Rank``\n\n\n`FROM your\\_dataset a\n\n\n ,(SELECT @rank:=0) b`\n\nORDER BY \\_\\_\\_`\n\nIn\u00a0MySQL Windowed\n--------------------\n\nYou can also create a windowed row count using variables. MySQL evaluates the FROM and ORDER BY portions of the query before evaluating the SELECT portion. Each column in the SELECT is then evaluated in order. You can take advantage of this order of evaluation to replicate the ROW\\_NUMBER and other windowing functions.\n\n\n Type the following code in your DataFlow:\n\n\n`SELECT`\n\n\n`a.`Name`,`\n\n\n`a.`Amount`,`\n\n\n`CASE WHEN a.`Name` = @PriorRecordName then @RowNumber := @RowNumber + 1`\n\n\n`WHEN a.`Name` <> @PriorRecordName then @RowNumber := 1`\n\n\n`END AS 'Windowed Row Number',`\n\n\n`@PriorRecordName := a.`Name``\n\n\n`FROM `mydatatable` a, (SELECT @PriorRecordName := '', @RowNumber := 0) AS b`\n\n\n`ORDER BY a.`Name, a.`Amount`\n\n\n In this query, the variables @PriorRecordName and @RowNumber are initialized before the SELECT portion of the query. The variables are initialized with the empty string and 0, respectively. Then, each column in the SELECT statement is evaluated in order. This method relies on the data being sorted correctly, so it is essential to include the `Name` and `Amount` columns in the ORDER BY of the query.\n\n\n The CASE statement determines how the `Windowed Row Number` is set. If the value of `Name` matches the value of the @PriorRecordName, then @RowNumber is incremented by one and that value is returned as the `Windowed Row Number` column. However, if `Name` does not match @PriorRecordName, then @RowNumber receives the value 1 and that value is returned as the `Windowed Row Number`. Finally, the @PriorRecordName variable is set to the `Name` field value.\n\n\n In its entirety, the query is returning rows in order, checking to see if the value of `Name` in the current row is the same as that in the prior row, and assigning a `Windowed Row Number` value accordingly.\n\n\n By performing the query above, your output should look like this:\n\nYou can create\u00a0 a windowed row count using variables without a CASE statement by typing the following code in your DataFlow:\n\n\n`Select`\n\n\n`a.\\*`\n\n\n`,@rank:=\u00a0 IF(@prev = a.`column`,@rank + 1,1) AS `Rank``\n\n\n`,@prev:= a.`column``\n\n\n`FROM your\\_dataset a\n\n\n ,(SELECT @rank:=0, @prev:=\u2019\u2019) b`\n\n\n In RedShift\n---------------\n\nEnter the following input code:\n\n\n`ROW\\_NUMBER () OVER`\n\n\n`(`\n\n\n`[ PARTITION BY expr\\_list ]`\n\n\n`[ ORDER BY order\\_list ]`\n\n\n`)`\n\n", "preview_article": "\n\nClick here to preview\n\n", "url_name": "\n\n\n 360042923414\n\n\n", "summary____________________________________________briefly_describe_the_article_the_summary_is_used_in_search_results_to_help_users_find_relevant_articles_you_can_improve_the_accuracy_of_search_results_by_including_phrases_that_your_customers_use_to_describe_this_issue_or_topic": "\n\n", "article_number": "\n\n\n 000004609\n\n\n", "archived_date": "\n\n\n", "language": "\n\n\n English\n\n\n", "primary_version": "\n\nCreating a Rank or Row Count\n\n", "article_total_view_count": "\n\n\n 5,937\n\n\n", "": "\n\n", "article_created_date": "\n\n\n 10/24/2022, 10:16 PM\n\n\n", "first_published_date": "\n\n\n 10/24/2022, 10:41 PM\n\n\n"}, "title": "creating_a_rank_or_row_count", "breadcrumbs": [{"text": "domo", "url": "/s/knowledge-base/"}, {"text": "transforming_data_in_domo", "url": "/s/topic/0TO5w000000ZamzGAC"}, {"text": "transformation_tips_and_tricks", "url": "/s/topic/0TO5w000000ZaoJGAS"}]}