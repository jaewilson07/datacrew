{"file_path": "../../raw_kb_v2\\article\\360042923414\\index.html", "content": {"Title": "Creating a Rank or Row Count", "Article Body": "To\n                        \n\n                          create a rank or row count for a DataSet, you can\n                         \n\n\n\n                          use a MySQL or RedShift DataFlow.\n                         \n\n\n\n\n\n                          In MySQL\n                         \n\n\n\n                        Type the following code in your DataFlow:\n                       \n\n\n\n\n                           Select\n                          \n\n\n\n\n\n\n\n                           a.*\n                          \n\n\n\n\n\n\n\n                           ,@rank:= @rank + 1 AS `Rank`\n                          \n\n\n\n\n\n\n\n                           FROM your_dataset a\n                           \n                           ,(SELECT @rank:=0) b\n                          \n\n\n\n\n\n\n\n                           ORDER BY ___\n                          \n\n\n\n\n\n\n\n\n\n                         In\u00a0MySQL Windowed\n                        \n\n\n                        You can also create a windowed row count using variables. MySQL evaluates the FROM and ORDER BY portions of the query before evaluating the SELECT portion. Each column in the SELECT is then evaluated in order. You can take advantage of this order of evaluation to replicate the ROW_NUMBER and other windowing functions.\n                       \n\n                        Type the following code in your DataFlow:\n                       \n\n\n                         SELECT\n                        \n\n\n\n                         a.`Name`,\n                        \n\n\n\n                         a.`Amount`,\n                        \n\n\n\n                         CASE WHEN a.`Name` = @PriorRecordName then @RowNumber := @RowNumber + 1\n                        \n\n\n\n                         WHEN a.`Name` <> @PriorRecordName then @RowNumber := 1\n                        \n\n\n\n                         END AS 'Windowed Row Number',\n                        \n\n\n\n                         @PriorRecordName := a.`Name`\n                        \n\n\n\n                         FROM `mydatatable` a, (SELECT @PriorRecordName := '', @RowNumber := 0) AS b\n                        \n\n\n\n                         ORDER BY a.`Name, a.`Amount\n                        \n\n\n                        In this query, the variables @PriorRecordName and @RowNumber are initialized before the SELECT portion of the query. The variables are initialized with the empty string and 0, respectively. Then, each column in the SELECT statement is evaluated in order. This method relies on the data being sorted correctly, so it is essential to include the `Name` and `Amount` columns in the ORDER BY of the query.\n                       \n\n                        The CASE statement determines how the `Windowed Row Number` is set. If the value of `Name` matches the value of the @PriorRecordName, then @RowNumber is incremented by one and that value is returned as the `Windowed Row Number` column. However, if `Name` does not match @PriorRecordName, then @RowNumber receives the value 1 and that value is returned as the `Windowed Row Number`. Finally, the @PriorRecordName variable is set to the `Name` field value.\n                       \n\n                        In its entirety, the query is returning rows in order, checking to see if the value of `Name` in the current row is the same as that in the prior row, and assigning a `Windowed Row Number` value accordingly.\n                       \n\n                        By performing the query above, your output should look like this:\n                       \n\n\n\n\n\n\n                        You can create\u00a0 a windowed row count using variables without a CASE statement by typing the following code in your DataFlow:\n                       \n\n\n                         Select\n                        \n\n\n\n\n\n                           a.*\n                          \n\n\n\n\n\n\n\n                           ,@rank:=\u00a0 IF(@prev = a.`column`,@rank + 1,1) AS `Rank`\n                          \n\n\n\n\n\n\n\n                           ,@prev:= a.`column`\n                          \n\n\n\n\n\n\n\n                           FROM your_dataset a\n                           \n                           ,(SELECT @rank:=0, @prev:=\u2019\u2019) b\n                          \n\n\n\n\n\n\n\n\n\n\n\n\n                          In RedShift\n                         \n\n\n\n                        Enter the following input code:\n                       \n\n\n\n\n                           ROW_NUMBER () OVER\n                          \n\n\n\n\n\n\n\n                           (\n                          \n\n\n\n\n\n\n\n                           [ PARTITION BY expr_list ]\n                          \n\n\n\n\n\n\n\n                           [ ORDER BY order_list ]\n                          \n\n\n\n\n\n\n\n                           )", "Preview Article": "Click here to preview", "URL Name": "360042923414", "Summary\n                     \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                       Briefly describe the article. The summary is used in search results to help users find relevant articles. You can improve the accuracy of search results by including phrases that your customers use to describe this issue or topic.": "", "Article Number": "000004609", "Archived Date": "", "Language": "English", "Primary Version": "Creating a Rank or Row Count", "Article Total View Count": "5,937", "": "", "Article Created Date": "10/24/2022, 10:16 PM", "First Published Date": "10/24/2022, 10:41 PM"}, "title": "\n              Creating a Rank or Row Count\n             ", "breadcrumbs": [{"text": "\n\n               Domo\n              \n", "url": "/s/knowledge-base/"}, {"text": "\n\n               Transforming Data In Domo\n              \n", "url": "/s/topic/0TO5w000000ZamzGAC"}, {"text": "\n\n               Transformation Tips And Tricks\n              \n", "url": "/s/topic/0TO5w000000ZaoJGAS"}]}